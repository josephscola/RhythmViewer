
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>8. The philosophy behind Transcrypt and its impact on design decisions &#8212; My sample book</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../../../../" id="documentation_options" src="../../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../../../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">My sample book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../../../intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../../markdown.html">
   Markdown Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../../notebooks.html">
   Content with notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../../markdown-notebooks.html">
   Notebooks with MyST Markdown
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/executablebooks/jupyter-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fenv/lib/python3.9/site-packages/transcrypt/docs/sphinx/philosophy_directions.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../../../../../_sources/env/lib/python3.9/site-packages/transcrypt/docs/sphinx/philosophy_directions.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transcrypt-s-primary-target-audience">
   8.1. Transcrypt’s primary target audience
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasoned-python-developers">
     8.1.1. Seasoned Python developers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasoned-javascript-developers">
     8.1.2. Seasoned JavaScript developers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-developers">
     8.1.3. Other developers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-best-serve-this-target-audience">
   8.2. How to best serve this target audience
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specific-design-choices-made-for-transcrypt-and-their-underlying-motivation">
   8.3. Specific design choices made for Transcrypt and their underlying motivation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-is-transcrypt-written-in-python-and-not-in-javascript">
     8.3.1. Why is Transcrypt written in Python and not in JavaScript
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-does-transcrypt-blend-python-datatypes-with-javascript-datatypes">
     8.3.2. Why does Transcrypt blend Python datatypes with JavaScript datatypes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-are-certain-python-constructions-supported-as-a-local-or-global-option-rather-than-by-default">
     8.3.3. Why are certain Python constructions supported as a local (or global) option rather than by default
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-were-the-pragma-s-added">
     8.3.4. Why were the __pragma__’s added
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>The philosophy behind Transcrypt and its impact on design decisions</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transcrypt-s-primary-target-audience">
   8.1. Transcrypt’s primary target audience
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasoned-python-developers">
     8.1.1. Seasoned Python developers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasoned-javascript-developers">
     8.1.2. Seasoned JavaScript developers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-developers">
     8.1.3. Other developers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-best-serve-this-target-audience">
   8.2. How to best serve this target audience
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specific-design-choices-made-for-transcrypt-and-their-underlying-motivation">
   8.3. Specific design choices made for Transcrypt and their underlying motivation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-is-transcrypt-written-in-python-and-not-in-javascript">
     8.3.1. Why is Transcrypt written in Python and not in JavaScript
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-does-transcrypt-blend-python-datatypes-with-javascript-datatypes">
     8.3.2. Why does Transcrypt blend Python datatypes with JavaScript datatypes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-are-certain-python-constructions-supported-as-a-local-or-global-option-rather-than-by-default">
     8.3.3. Why are certain Python constructions supported as a local (or global) option rather than by default
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-were-the-pragma-s-added">
     8.3.4. Why were the __pragma__’s added
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="the-philosophy-behind-transcrypt-and-its-impact-on-design-decisions">
<h1><span class="section-number">8. </span>The philosophy behind Transcrypt and its impact on design decisions<a class="headerlink" href="#the-philosophy-behind-transcrypt-and-its-impact-on-design-decisions" title="Permalink to this headline">#</a></h1>
<section id="transcrypt-s-primary-target-audience">
<h2><span class="section-number">8.1. </span>Transcrypt’s primary target audience<a class="headerlink" href="#transcrypt-s-primary-target-audience" title="Permalink to this headline">#</a></h2>
<p>Transcrypt is written for internet developers who:</p>
<ul class="simple">
<li><p>Prefer Python over JavaScript for the development of complex, yet maintainable web software with minimal lifecycle costs</p></li>
<li><p>Need their software to be every bit as fast and compact as the native JavaScript counterparts</p></li>
<li><p>Want unrestricted use of any JavaScript library or platform</p></li>
</ul>
<p>In this primary target audience there are at least two groups to be distinguished and a third group on the border.</p>
<section id="seasoned-python-developers">
<h3><span class="section-number">8.1.1. </span>Seasoned Python developers<a class="headerlink" href="#seasoned-python-developers" title="Permalink to this headline">#</a></h3>
<p>They may be using Python on the server-side (e.g. Django) or in developing computational applications (NumPy, SciPy), or in fact in any area of computing.
These ‘pythonistas’ value what they’ve got: A clean, concise, powerful language, able to tackle any IT problem, especially in combination with C++.
When faced with JavaScript in the browser, they experience a frustrating loss of productivity, being bogged down in an organically grown mix of HTML, CSS and JavaScript.</p>
<p>For them the news is that they have more viable options:</p>
<p>Is HTML ok? They can use it. Do they find it restrictive? They can manipulate the underlying object model directly in Python.
Is CSS ok for them? No need to change then. Do they find it utterly confusing, inconsequent, repetitive and static? They can access the underlying style attributes dynamically in Python.
Is JavaScript ok for them? If it ain’t broke, don’t fix it. Did they already experience that for larger applications the overall structure tends to become messy? They can switch to Python, keeping full access to any JavaScript library.</p>
<p>Recently legitimate worries have surfaced about the JavaScript world becoming more an more fragmented. Transcrypt is not about fragmentation but about unification. It doesn’t introduce a new language. It makes a mainstream server side language available for development of client side code, without sacrificing performance, compactness or compatibility.</p>
</section>
<section id="seasoned-javascript-developers">
<h3><span class="section-number">8.1.2. </span>Seasoned JavaScript developers<a class="headerlink" href="#seasoned-javascript-developers" title="Permalink to this headline">#</a></h3>
<p>They may have been using JavaScript for a long time and have accepted its quirks as a fact of life. If it’s their first language they will probably not perceive any of its drawbacks as restrictive. But even in that case a part of them will eventually explore other languages, look back and clearly see its limitations.</p>
<p>All the talk of speed in JavaScript suddenly becomes irrelevant in the light of using C++ for computation-intensive algorithms. And all the talk about prototypes in fact being superior to class based object orientation suddenly seems to lack substance when real, non-textbook programming experience is gained in a truly class based language rather than one eventually acquiring the keyword ‘class’ to cover its prototyping guts.</p>
<p>If these developers are confronted with the need to develop a new, large, complex web application, they may think about software lifecycle costs and decide that it would be best to develop the client side in Python, provided that execution- and page-load performance is fully maintained.</p>
</section>
<section id="other-developers">
<h3><span class="section-number">8.1.3. </span>Other developers<a class="headerlink" href="#other-developers" title="Permalink to this headline">#</a></h3>
<p>In this group will be experienced developers who are familiar with C++, C, C#, Java or any other language. But it also includes students of any kind, being serious about a professional IT carreer, but not yet there.</p>
<p>Programming for the web may be new to them, and rather than following the lowest common denominator, they may just as well enter this new world the proper way, respecting the constitution of software design: modularity and thin interfaces, learning to balance loose coupling against internal cohesion.</p>
<p>The fact that it took so long to introduce something simple like a decent module mechanism into JavaScript is a telltale sign of severe underdevelopment in this area. In the vast pool of JavaScript developers there are many that are highly skilled and resourceful, and they have successfully circumvented this restriction by using functions as modules, keeping their local variables and functions alive artificially. But a language having modularisation so low on its priority list, is a less than ideal starting point for acquiring good manners in web application design.</p>
</section>
</section>
<section id="how-to-best-serve-this-target-audience">
<h2><span class="section-number">8.2. </span>How to best serve this target audience<a class="headerlink" href="#how-to-best-serve-this-target-audience" title="Permalink to this headline">#</a></h2>
<p>The main point, as with any design, is the willingness to let go of dogmaticism in favor of a good balance.
Starting out from the fact that Transcypt should be 100% CPython compatible would be very clear and unambigous, and in that sense attractive.
However with current technology it’s also completely off-limits for any viable real world development, directly competing with JavaScript in the area of speed and compactness.
Users of web applications don’t care about technology.
If they have to wait for more than two seconds for a page to load, many of them zap.
If the rest have to wait for more that half a minute, they conclude its time for a browser restart, a modem reset, or a new access provider.</p>
<p>And developers don’t care about purism. They cannot afford to paint themselves into a corner but need direct access to the full spectrum of JavaScript libraries and frameworks. Application development is hard enough without extra restrictions posed by your development tools.</p>
<p>It’s completely agreed that having native CPython in the browser would be great.
But having JavaScript in between, even as asm.js, unfortunately makes it impractical.</p>
<p>It’s completely agreed that many Python developers would like all of their familiar libraries to be avaible.
But the fact that most of them are written in C, makes it equally impractical, since they would load at snail speed in a browser.
Apart from that, for viable web development, unimpeded access to JavaScript libraries is far more important.</p>
<p>One alternative is to wait from the browser manufacturers to support descents to pure, true assembler, or at least C or C++.
Given the fact that Java was kicked out because of security concerns, it is unlikely that a language without array boundary checks would be allowed in.
And if such checks were added it would be rather slow, though not unuseable per se.</p>
<p>If ever a fast, compact, browser-native CPython implementation gets developed, with seamless access to the huge investment represented by existing JavaScript libraries, converting from Transcrypt to it will be a snap compared to conversion from JavaScript. So actually Transcrypt, because of its proximity to CPython, is very future-proof, whereas all types of ‘better JavaScript’ or propietary languages are not. What matters to Transcrypt developers is not Transcrypt’s future, but Python’s future, which is bright without restriction.</p>
<p>Transcrypt strikes a careful balance between completely implementing CPython including this last 10% which will cause 90% of the bloat on one hand, and being too much restricted by JavaScript’s shortcomings without necessity on the other. This balance e.g. means that Python’s ‘eval’ and ‘exec’ (not to be confused with JavaScript’s) are out, and multiple inheritance and selective operator overloading are in.
It means that Transcrypt’s and JavaScript’s type system are unified, compact, fast and interoperable, rather than stricktly separated, bulky, slow and requiring conversion.</p>
<p><strong>In short: Transcrypt serves its target audience by allowing them to develop fast, compact, future-proof web applications on clients and servers in one stable, well-established language, running on any platform, minimizing lifecycle costs. Not as a promise, but now.</strong></p>
</section>
<section id="specific-design-choices-made-for-transcrypt-and-their-underlying-motivation">
<h2><span class="section-number">8.3. </span>Specific design choices made for Transcrypt and their underlying motivation<a class="headerlink" href="#specific-design-choices-made-for-transcrypt-and-their-underlying-motivation" title="Permalink to this headline">#</a></h2>
<section id="why-is-transcrypt-written-in-python-and-not-in-javascript">
<h3><span class="section-number">8.3.1. </span>Why is Transcrypt written in Python and not in JavaScript<a class="headerlink" href="#why-is-transcrypt-written-in-python-and-not-in-javascript" title="Permalink to this headline">#</a></h3>
<p>Transcrypt departs from the Python side of things. It is not JavaScript approaching the Python world, but Python approaching the JavaScript world. What enabled this approach, is that the notion of compiling on the fly in the browser was rejected from the start. While this would have enabled things like ‘exec’ and ‘eval’ and would have made the compilation process fully transparent, compiling a piece of interpreted code on the fly will always stand in the way of performance. And any compromise with regard to performance was judged to be lethal for accepting Transcrypt as a serious win-win alternative for JavaScript in a world where download size and page-load speed are crucial factors.</p>
<p>Syntactically speaking, Python isn’t as simple as it may seem. Using indentation to indicate blocks has a profoundly positive effect upon the readability of the language, but also creates parsing anomalies. The flexibility with regard to formal and actual function parameters makes parsing even more complex. Developing Transcrypt in Python makes available the original, rock-solid Python parser to do the job fast and concise. And since Transcrypt and Python use the same parser, Python can never syntactically develop into a direction that Transcrypt couldn’t follow. To JavaScript developers having ‘__new__ ()’ instead of ‘new’ may well indeed be new, to Python developers it’s just another function call. Given the turmoil created by getting rid of Python’s ‘print’ statement in favour of ‘print ()’ it wouldn’t be wise to introduce another unnecessary syntactic anomaly. Even a __pragma__ syntactically (but not semantically) is just another function call. This approach also facilitates reuse of the existing concise documentation on Python’s syntax. Transcrypt syntax == Python syntax. Period.</p>
<p>And then there’s the matter of distribution. Transcrypt is just another Python application, available from PyPi like any other, requiring Python like any other. And its library modules can be distributed via PyPi or any of its successors. It is very well possible to write ‘pure Python modules’ that run both under CPython and Transcrypt. But the importance of this is, apart from some fundamental modules, limited. For use in the browser, the enormous amount of ‘actually existing’ JavaScript libraries are far more interesting. And they can be loaded the JavaScript way, either on the fly from a content distribution network, or via ‘require’.</p>
<p>Finally there’s the efficiency of development of Transcypt itself. Transcrypt was written because programming in Python was very much preferred over programming in JavaScript. So why on earth then would JavaScript be preferred over Python in writing it…</p>
</section>
<section id="why-does-transcrypt-blend-python-datatypes-with-javascript-datatypes">
<h3><span class="section-number">8.3.2. </span>Why does Transcrypt blend Python datatypes with JavaScript datatypes<a class="headerlink" href="#why-does-transcrypt-blend-python-datatypes-with-javascript-datatypes" title="Permalink to this headline">#</a></h3>
<p>The answer can be short: Compactness, speed and interoperability on the library front. Being able e.g. to interpret {‘color’: ‘red’, ‘size’: ‘medium’} both as a JavaScript object and as a Python dictionary save lots of conversions, library encapsulation layers and counterintuitive restrictions. It minize code size and maximizes speed of data exchange between JavaScript and Python. Crucial to making it work is the identifier aliasing mechanism. It facilitates carefree use of Python keywords and identifiers, solving any name clashes with their JavaScript counterparts, now and in the future. It doesn’t matter that both Python and JavaScript have a ‘strip’ method for strings that do different things. Using ‘strip’ in Python will translate to ‘py_strip’ and JavaScript’s native ‘strip’ method can be used from Python under the name ‘js_strip’.</p>
</section>
<section id="why-are-certain-python-constructions-supported-as-a-local-or-global-option-rather-than-by-default">
<h3><span class="section-number">8.3.3. </span>Why are certain Python constructions supported as a local (or global) option rather than by default<a class="headerlink" href="#why-are-certain-python-constructions-supported-as-a-local-or-global-option-rather-than-by-default" title="Permalink to this headline">#</a></h3>
<p>Efficiency is the reason. While it seems very sophisticated to globally support operator overloading by default, replacing x = 2 * (3 + 4) by x = __mul__ (__add__ (3, 4)) in a program full of such expressions, possibly in inner loops, would have a disastrous impact on both performance and readability of the generated JavaScript code. And readability of the generated code is a must. Transcrypt should not be a magical toolbox, close your eyes, trust us and here’s the rabbit. The way it works should be fully transparent, including quality and correctness of the generated JavaScript code. On the other hand, who would like to write v4 = add (multiply (add (v1, v2)), v3) rather than v4 = M (v1 + v2) + v3 in a program consisting of many lines of vector math.</p>
<p>In general compiler facilities that may have a negative impact on performance if applied in the wrong places can be switched on and off locally. The reason they sometimes also are available as a global option is educational use. If straightforward pythonic code matters more than performance, which is the case in an educational situation, setting all switches to maximize CPython compliance may be a good idea, especially if the generated JavaScript code is taken for granted as are assembly instructions with a C compiler.</p>
<p>The following benchmark results give an indication of the performance of Transcrypt’ed code with default settings:</p>
<figure class="align-default">
<img alt="Relative performance measured by Pystone benchmark" src="../../../../../../../_images/benchmark.png" />
</figure>
<p>Note that Transcrypt avoids constructs that cannot be made to perform in the browser. This means that Transcrypt and CPython are playing in different leagues. Transcrypt makes it possible for Python programmers to take a lot of their skills to the browser, but it is in no way a replacement for CPython. The two should be regarded as complementary.</p>
</section>
<section id="why-were-the-pragma-s-added">
<h3><span class="section-number">8.3.4. </span>Why were the __pragma__’s added<a class="headerlink" href="#why-were-the-pragma-s-added" title="Permalink to this headline">#</a></h3>
<p>Several special facilities were needed that don’t play a role in CPython: local compilation options, setting identifier aliases, e.g. replacing jq or S by $ to be able to bridge the gap with JQuery, conditional compilation of code fragments like imports, who, by nature of compilation rather than interpretation, are done compile time rather than runtime hence won’t obey normal ‘if’ statements, etc.. For all those special facilities special keywords could have been devised. It would make such special facilities hard to recognize and keyword-hungry. Using __pragma__ in these cases provides a simple clue to what’s going on, both for developers and for the compiler. In the C/C++ world pragma’s serve a comparable purpose. They are, as the word suggest, pragmatic solutions to practical problems. Pragmatism is good. But it should be insulated and carefully managed. A special keyword helps with that.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./env/lib/python3.9/site-packages/transcrypt/docs/sphinx"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Jupyter Book Community<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>